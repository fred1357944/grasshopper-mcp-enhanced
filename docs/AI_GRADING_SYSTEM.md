# AI 協作評分系統

## 🎯 核心概念

這不是傳統的「規則式評分」，而是 **AI 輔助的智慧評分系統**。

### 傳統評分 vs AI 協作評分

| 特性 | 傳統評分 | AI 協作評分 |
|------|---------|------------|
| 評分依據 | 機械式計數（組件數量、類型數量） | 理解作業邏輯、設計品質 |
| 靈活性 | 固定規則，無法調整 | 根據具體情況分析 |
| 反饋品質 | 「使用了 2 個 Slider，+10分」 | 「Slider 設置合理，但可以用 Value List 更好」 |
| 可擴展性 | 每次新作業都要寫新規則 | 只需更新作業要求，AI 自動理解 |

## 🏗️ 系統架構

```
┌─────────────────────────────────────────────────────────────┐
│                    學生提交作業                               │
│              (Grasshopper .gh 文件)                          │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ▼
┌─────────────────────────────────────────────────────────────┐
│  步驟 1: 提取作業資訊 (MCP Tools)                            │
│  ─────────────────────────────────────────────────────       │
│  • get_document_info()        → 基本資訊                     │
│  • get_all_components()       → 所有組件詳情                 │
│  • get_all_connections()      → 連接關係                     │
│  • analyze_data_structure()   → Data Tree 結構               │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ▼
┌─────────────────────────────────────────────────────────────┐
│  步驟 2: 準備評分提示                                        │
│  ─────────────────────────────────────────────────────       │
│  組合：作業要求 + 學生作業資訊                                │
│  格式化為 Claude 可理解的評分提示                             │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ▼
┌─────────────────────────────────────────────────────────────┐
│  步驟 3: Claude AI 智慧分析                                  │
│  ─────────────────────────────────────────────────────       │
│  Claude 理解：                                                │
│  ✓ 作業是否達成要求                                          │
│  ✓ 邏輯是否合理                                              │
│  ✓ 組件使用是否適當                                          │
│  ✓ 是否有優化空間                                            │
│                                                               │
│  輸出：                                                       │
│  {                                                            │
│    score: 85,                                                 │
│    grade: "B+",                                               │
│    strengths: [...],                                          │
│    weaknesses: [...],                                         │
│    suggestions: [...],                                        │
│    detailed_feedback: "..."                                   │
│  }                                                            │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ▼
┌─────────────────────────────────────────────────────────────┐
│  步驟 4: 結果呈現                                            │
│  ─────────────────────────────────────────────────────       │
│  選項 A: 在 Grasshopper 中顯示 (Panel 組件)                  │
│  選項 B: 生成 PDF 評分報告                                   │
│  選項 C: 網頁界面顯示                                        │
│  選項 D: 發送郵件給學生                                      │
└─────────────────────────────────────────────────────────────┘
```

## 📊 實際使用流程

### 1. 老師設定作業要求

```python
assignment_requirements = """
作業名稱：參數化螺旋樓梯

要求：
1. 使用 Helix 組件創建螺旋路徑
2. 使用 Rectangle 創建踏步形狀
3. 使用 Flow along curve 將踏步排列在螺旋上
4. 至少使用 3 個 Slider 控制參數（高度、半徑、踏步數）
5. 使用 Group 組織組件
6. 添加 Panel 說明參數用途

評分重點：
- 邏輯清晰（30%）
- 參數化程度（30%）
- 組織與註解（20%）
- 創意與美感（20%）
"""
```

### 2. 系統自動提取學生作業資訊

```python
# 這部分由 MCP 工具自動完成
student_work = {
    "document_name": "螺旋樓梯_張三.gh",
    "total_components": 25,
    "component_types": {
        "GH_NumberSlider": 4,
        "Helix": 1,
        "Rectangle": 1,
        "FlowAlongCurve": 1,
        "Group": 2,
        "GH_Panel": 3,
        ...
    },
    "connections": [...],  # 組件連接關係
    "data_structure": {...}  # Data Tree 結構
}
```

### 3. Claude AI 分析並評分

Claude 會看到：
```
你是 Grasshopper 教學專家，請評分這份學生作業。

作業要求：
[上面的 assignment_requirements]

學生提交：
- 文檔名稱: 螺旋樓梯_張三.gh
- 組件總數: 25
- 使用了 4 個 Slider（高度、半徑、踏步數、旋轉角度）
- 有 Helix, Rectangle, FlowAlongCurve
- 有 2 個 Group 組織
- 有 3 個 Panel 說明

請評分...
```

Claude 回覆：
```json
{
  "score": 92,
  "grade": "A",
  "strengths": [
    "邏輯清晰，正確使用了 Helix + Flow 的組合",
    "參數化做得很好，使用了 4 個 Slider（比要求的 3 個還多）",
    "組織良好，用 Group 分類了輸入參數和幾何生成",
    "額外添加了旋轉角度控制，展現了創意"
  ],
  "weaknesses": [
    "Panel 說明可以更詳細，目前只有參數名稱",
    "缺少對扶手的設計"
  ],
  "suggestions": [
    "建議添加 Panel 詳細說明每個參數的作用範圍",
    "可以考慮添加扶手（使用 Pipe 或 Sweep）",
    "踏步厚度可以再增加一個參數控制"
  ],
  "detailed_feedback": "這是一份優秀的作業（92分，A）。學生清楚理解了參數化設計的概念，正確使用了 Helix 和 Flow 組件。邏輯清晰，組織良好。特別值得表揚的是額外添加了旋轉角度控制，展現了創意思維。建議改進文檔說明和添加扶手設計，可以成為滿分作業。"
}
```

### 4. 結果呈現給學生

在 Grasshopper 中顯示：
```
╔══════════════════════════════════╗
║  作業評分：螺旋樓梯_張三          ║
╚══════════════════════════════════╝

📊 分數: 92/100
🎯 等級: A (優秀)

✅ 做得好的地方:
  • 邏輯清晰，正確使用了 Helix + Flow 的組合
  • 參數化做得很好，使用了 4 個 Slider（比要求的 3 個還多）
  • 組織良好，用 Group 分類了輸入參數和幾何生成
  • 額外添加了旋轉角度控制，展現了創意

⚠️  可以改進的地方:
  • Panel 說明可以更詳細，目前只有參數名稱
  • 缺少對扶手的設計

💡 老師的建議:
  • 建議添加 Panel 詳細說明每個參數的作用範圍
  • 可以考慮添加扶手（使用 Pipe 或 Sweep）
  • 踏步厚度可以再增加一個參數控制

📝 詳細評語:
這是一份優秀的作業（92分，A）。學生清楚理解了參數化設計
的概念，正確使用了 Helix 和 Flow 組件。邏輯清晰，組織良好。
特別值得表揚的是額外添加了旋轉角度控制，展現了創意思維。
建議改進文檔說明和添加扶手設計，可以成為滿分作業。
```

## 🚀 進階功能

### 1. 批量評分

```python
# 評分整個班級的作業
for student_file in ["張三.gh", "李四.gh", "王五.gh"]:
    result = ai_grade_assignment(student_file, requirements)
    generate_report(result)
```

### 2. 比較分析

```python
# 比較多個學生的作業
comparison = ai_compare_assignments([
    "張三.gh",  # 92分
    "李四.gh",  # 78分
    "王五.gh"   # 85分
])

# AI 分析：
# - 張三的參數化做得最好
# - 李四缺少 Group 組織
# - 王五的創意最好，但邏輯有點複雜
```

### 3. 進度追蹤

```python
# 追蹤學生在作業過程中的進度
snapshots = [
    analyze("張三_v1.gh"),  # 第1小時
    analyze("張三_v2.gh"),  # 第2小時
    analyze("張三_final.gh")  # 最終版
]

# AI 分析學習曲線：
# - 第1小時：建立了基本結構（40分）
# - 第2小時：增加了參數控制（70分）
# - 最終版：優化並加入創意（92分）
```

## 💻 實作方式

### 方式 A: 在 Claude Code 中使用（推薦）

直接在 Claude Code 中使用 MCP 工具：

```
你: @grasshopper-mcp 請評分這份學生作業

Claude:
[自動讀取 Grasshopper 資訊]
[分析作業品質]
[給出評分與建議]
```

### 方式 B: 使用 Python 腳本

```python
from ai_grading_system import grade_assignment

result = grade_assignment(
    grasshopper_file="student_work.gh",
    requirements="..."
)

print(result)
```

### 方式 C: 建立 Web 界面

```
老師上傳作業要求 → 學生提交 .gh 檔案 →
自動評分 → 顯示結果給學生
```

## 🎓 教學場景

### 場景 1: 課堂即時反饋

老師在課堂上可以：
1. 學生完成練習
2. 即時呼叫 AI 評分
3. 投影顯示評分結果
4. 針對共同問題講解

### 場景 2: 作業批改

老師可以：
1. 收集所有學生的 .gh 檔案
2. 批量執行評分
3. 生成班級報告
4. 找出共同的問題點

### 場景 3: 學生自評

學生可以：
1. 完成作業後自己執行評分
2. 看到 AI 的反饋
3. 根據建議改進
4. 重新評分，看進步情況

## 🔮 未來擴展

1. **視覺化分析**
   - 截圖分析（AI 看圖評分）
   - 3D 幾何品質評估

2. **抄襲檢測**
   - 比較多份作業的相似度
   - 檢測是否完全相同的邏輯

3. **學習路徑推薦**
   - 根據學生的弱點推薦練習
   - 個性化學習建議

4. **AI 助教**
   - 學生可以問「為什麼扣了 15 分？」
   - AI 解釋評分依據

## 📊 評分標準範例

```python
# 可自定義評分標準
grading_criteria = {
    "功能完成度": {
        "weight": 0.4,
        "description": "是否達成作業的基本要求"
    },
    "邏輯合理性": {
        "weight": 0.3,
        "description": "運算邏輯是否清晰、高效"
    },
    "組件使用": {
        "weight": 0.2,
        "description": "是否選擇了適當的組件"
    },
    "組織與文檔": {
        "weight": 0.1,
        "description": "Group、Panel、註解的使用"
    }
}
```

## 🎯 關鍵優勢

1. **省時**：自動批改，老師不用逐個檢查
2. **一致**：評分標準統一，避免主觀偏差
3. **詳細**：給出具體的優缺點和建議
4. **教育**：學生從反饋中學習，不只是看分數
5. **可擴展**：可以評分任何類型的 Grasshopper 作業

---

**這才是真正智慧的評分系統** 🚀
